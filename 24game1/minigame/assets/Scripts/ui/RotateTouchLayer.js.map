{"version":3,"sources":["__temp/buildProcess/inlineFunctionProcess/Scripts/ui/RotateTouchLayer.ts"],"names":[],"mappings":";;;AAAA,iCAA4B;AAC5B,mDAA8C;AAC9C,sDAAgD;AAKhD,IAAM,WAAW,GAAG,EAAE,CAAC;AACvB,IAAM,SAAS,GAAG,CAAC,CAAC;AAEpB;IAA8C,4CAAc;IAQxD,0BAA4B,MAAgB;QAA5C,YACI,kBAAM,MAAM,CAAC,SAChB;QAF2B,YAAM,GAAN,MAAM,CAAU;QAPpC,oBAAc,GAAW,EAAE,CAAC;QAC5B,oBAAc,GAAW,EAAE,CAAC;QAC5B,kBAAY,GAAY,KAAK,CAAC;QAC9B,gBAAU,GAAY,KAAK,CAAC;QAE5B,UAAI,GAAmB,gBAAM,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC;;IAI3D,CAAC;IAEM,mCAAQ,GAAf;IAEA,CAAC;IAEM,kCAAO,GAAd;QACI,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACjD,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACzD,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAE/D,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QACxC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAA;QAC1C,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;IACrD,CAAC;IAEO,8CAAmB,GAA3B,UAA4B,KAAqB,EAAE,IAAoB,EAAE,OAAuB;QAC5F,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;IAC9B,CAAC;IAEO,2CAAgB,GAAxB,UAAyB,KAAqB,EAAE,IAAoB,EAAE,OAAuB;QACzF,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;IAC9B,CAAC;IAEO,uCAAY,GAApB,UAAqB,KAAqB,EAAE,IAAoB,EAAE,OAAuB;QACrF,IAAG,CAAC,IAAI,CAAC,YAAY,EAAE;YACnB,OAAO,CAAC,GAAG,CAAC,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;YAC9B,IAAG,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,SAAS,EAAE;gBAC/B,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;aAC5B;SACJ;QACD,OAAO,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;QAC7B,sBAAY,CAAC,IAAI,CAAC,sBAAY,CAAC,YAAY,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;IAE5D,CAAC;IA5CgB,gBAAgB;QADpC,gBAAM,CAAC,UAAU,CAAC,SAAS,CAAC,kBAAkB,CAAC;OAC3B,gBAAgB,CA6CpC;IAAD,uBAAC;CA7CD,AA6CC,CA7C6C,wBAAc,GA6C3D;kBA7CoB,gBAAgB","file":"RotateTouchLayer.js","sourcesContent":["import engine from \"engine\";\nimport TouchLayerBase from \"./TouchLayerBase\";\nimport EventManager from \"../event/EventManager\" \n\ndeclare type Entity2D = engine.Entity2D;\n\n// Cusor移动范围\nconst CUSOR_RANGE = 30;\nconst MINUS_DIS = 5;\n@engine.decorators.serialize(\"RotateTouchLayer\")\nexport default class RotateTouchLayer extends TouchLayerBase {\n    private rotationXSpeed: number = 20;\n    private rotationYSpeed: number = 20;\n    private beginGesture: boolean = false;\n    private isVertical: boolean = false;\n\n    private diff: engine.Vector2 = engine.Vector2.ZERO.clone();\n\n    constructor(public readonly entity: Entity2D) {\n        super(entity);\n    }\n\n    public onUpdate() {\n\n    }\n\n    public onAwake() {\n        this.onCustomMove = this.onCustomMove.bind(this);\n        this.onCustomTouchEnd = this.onCustomTouchEnd.bind(this);\n        this.onCustomTouchCancel = this.onCustomTouchCancel.bind(this);\n\n        this.registTouchMove(this.onCustomMove);\n        this.registTouchEnd(this.onCustomTouchEnd)\n        this.registTouchCancel(this.onCustomTouchCancel);\n    }\n\n    private onCustomTouchCancel(start: engine.Vector2, last: engine.Vector2, current: engine.Vector2) {\n        this.beginGesture = false;\n    }\n\n    private onCustomTouchEnd(start: engine.Vector2, last: engine.Vector2, current: engine.Vector2) {\n        this.beginGesture = false;\n    }\n\n    private onCustomMove(start: engine.Vector2, last: engine.Vector2, current: engine.Vector2) {\n        if(!this.beginGesture) {\n            current.sub(start, this.diff);\n            if(this.diff.length() > MINUS_DIS) {\n                this.beginGesture = true;\n            }\n        }\n        current.sub(last, this.diff);\n        EventManager.emit(EventManager.CameraRotate, this.diff);\n\n    }\n}"]}